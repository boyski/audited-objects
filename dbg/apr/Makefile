.PHONY: all clean

CPP = gcc -E

all: apr.exp

apr.exp:
	echo "#! libapr-FOO.so" > $@
	@cksum $@
	echo "* This file was AUTOGENERATED at build time." >> $@
	@cksum $@
	echo "* Please do not edit by hand." >> $@
	@cksum $@
	$(CPP) $(ALL_CPPFLAGS) $(ALL_INCLUDES) exports.c | grep "ap_hack_" | sed -e 's/^.*[)]\(.*\);$$/\1/' >> $@
	@cksum $@
	$(CPP) $(ALL_CPPFLAGS) $(ALL_INCLUDES) export_vars.c | sed -e 's/^\#[^!]*//' | sed -e '/^$$/d' >> $@
	@cksum $@

clean:
	rm -f apr.exp
